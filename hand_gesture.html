<!DOCTYPE HTML>
<html>

<head>
    <title>Hand Gesture</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" />
    </noscript>

    <!-- Load TensorFlow.js and Handpose libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/handpose"></script>
</head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <a href="index.html" class="logo">Notify Me</a>
        </header>

        <!-- Nav -->
        <nav id="nav">
            <ul class="links">
                <li><a href="index.html">Project Page</a></li>
                <li><a href="generic.html">Project Creators</a></li>
                <li><a href="elements.html">Project Documents</a></li>
                <li class="active"><a href="hand_gesture.html">Hand Gesture</a></li>
            </ul>
            <ul class="icons">
                <li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
                <li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
                <li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
                <li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
            </ul>
        </nav>

        <!-- Main -->
        <div id="main">

            <div style="width: 100%; max-width: 1600px; max-height: 1000px; margin: 0 auto;">
                <video id="videoElement" autoplay style="width: 100%; height: 100%;"></video>
                <canvas id="canvas" style="position: absolute; top: 0; left: 0;"></canvas>
            </div>

            <script>
                async function setupHandTracker() {
                    const video = document.getElementById("videoElement");
                    const canvas = document.getElementById("canvas");
                    const ctx = canvas.getContext("2d");

                    try {
                        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                        video.srcObject = stream;

                        // Load the handpose model
                        const handpose = await handpose.load();

                        // Detect and draw hands in each frame
                        const videoWidth = video.width;
                        const videoHeight = video.height;

                        video.onloadedmetadata = function () {
                            video.play();

                            async function detectHands() {
                                const predictions = await handpose.estimateHands(video);

                                ctx.clearRect(0, 0, videoWidth, videoHeight);

                                if (predictions.length > 0) {
                                    handpose.draw(ctx, predictions);
                                }

                                requestAnimationFrame(detectHands);
                            }

                            detectHands();
                        };
                    } catch (error) {
                        console.error("Error setting up hand tracking:", error);
                    }
                }

                setupHandTracker();
            </script>
        </div>

        <!-- Copyright -->
        <div id="copyright">
            <ul>
                <li>&copy; Untitled</li>
                <li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
            </ul>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
</body>

</html>
