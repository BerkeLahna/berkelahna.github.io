<!DOCTYPE HTML>
<html>
<head>
    <title>Hand Gesture</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper">

    <!-- Header -->
    <header id="header">
        <a href="hand_gesture.html" class="logo">Try It</a>
    </header>

    <!-- Nav -->
    <nav id="nav">
        <ul class="links">
            <li><a href="index.html">Project Page</a></li>
            <li><a href="generic.html">Project Creators</a></li>
            <li><a href="elements.html">Project Documents</a></li>
            <li class="active"><a href="hand_gesture.html">Hand Gesture</a></li>
            <li><a href="iframe.html">Hand Gesture App</a></li>
        </ul>
        <ul class="icons">
            <li><a href="https://github.com/BerkeLahna/berkelahna.github.io" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
        </ul>
    </nav>

    <!-- Main -->
    <div id="main">
        <div style="width: 100%; max-width: 1600px; max-height: 1000px; margin: 0 auto;">
            <video id="videoElement" autoplay style="width: 100%; height: 100%;" src=""></video>
            <div id="prediction"></div> <!-- Add a div to display predictions -->
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script> <!-- Include TensorFlow.js -->

        <script>
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    var video = document.getElementById("videoElement");
                    video.srcObject = stream;

                    // Load your model and make predictions here
                    const modelURL = 'model.json'; // Replace with the correct URL to your model.json file
                    const weightsURL = 'model.h5'; // Replace with the correct URL to your model_weights.bin file

                    async function loadModel() {
                        const model = await tf.loadGraphModel(modelURL);
                        await model.loadWeights(weightsURL);
                        return model;
                    }

                    async function predict() {
                        const model = await loadModel();

                        // Capture the current video frame
                        const image = tf.browser.fromPixels(video);

                        // Preprocess the image if necessary (e.g., resize, normalize)

                        // Make predictions
                        const predictions = model.predict(image);

                        // Display predictions on the webpage
                        const predictionElement = document.getElementById('prediction');
                        predictionElement.innerText = predictions.dataSync(); // Display predictions on the page

                        // Clean up the tensors
                        image.dispose();
                        predictions.dispose();

                        // Loop for continuous prediction (call predict function in requestAnimationFrame)
                        requestAnimationFrame(predict);
                    }

                    // Start making predictions
                    predict();
                })
                .catch(function (error) {
                    console.log("Error accessing camera: " + error);
                });
        </script>
    </div>

    <!-- Copyright -->
    <div id="copyright">
        <ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
    </div>
</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

</body>
</html>
